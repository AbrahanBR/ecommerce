<mat-toolbar color="primary">
  <div class="container navbar-container">
    <span>My App</span>

    <mat-form-field class="example-spacer">
      <mat-label>Search</mat-label>
      <input matInput placeholder="Ex. Pizza" />
    </mat-form-field>

    <ng-container *ngIf="userDetails; then buttonLoggedIn; else buttonLoggedOut"></ng-container>
    <ng-template #buttonLoggedIn>
      <button 
      #menuEventLogIn="matMenuTrigger"
      [matMenuTriggerFor]="userLoged"
      mat-button
      class="example-icon"
      aria-label="Example icon-button with menu icon"
    >
        <mat-icon>person</mat-icon> {{ userDetails?.name | titlecase }}
      </button>
    </ng-template>

    <ng-template #buttonLoggedOut>
      <button 
      #menuEventLogOut="matMenuTrigger"
      [matMenuTriggerFor]="userNotLoged"
      mat-button
      class="example-icon"
      aria-label="Example icon-button with menu icon"
    >
        <mat-icon>person_outline</mat-icon> Login</button>
    </ng-template>

    <button
      mat-icon-button
      class="example-icon favorite-icon"
      aria-label="Example icon-button with heart icon"
    >
      <mat-icon>favorite</mat-icon>
    </button>

    <button
      mat-icon-button
      class="example-icon"
      aria-label="Example icon-button with share icon"
    >
      <mat-icon>share</mat-icon>
    </button>
  </div>
</mat-toolbar>

<mat-menu #userNotLoged="matMenu">
  <form #form="ngForm" (ngSubmit)="login(userName.value, password.value)" (click)="$event.stopPropagation()">
    
    <div mat-menu-item [disableRipple]="true">
      <mat-form-field>
        <mat-label>User Name</mat-label>
        <input #userName="ngModel" ngModel name="userName" matInput placeholder="Ex. Abrahan" required/>
      </mat-form-field>
    </div>

    <div mat-menu-item [disableRipple]="true">
        <mat-form-field>
          <mat-label>Password</mat-label>
          <input #password="ngModel" ngModel name="password" type="password" matInput required/>
        </mat-form-field>
    </div>

    <div mat-menu-item [disableRipple]="true">
        <a routerLink="register" mat-button type="button">Create</a>
        <button mat-raised-button color="primary" [disabled]="userName.invalid || password.invalid">Login</button>
    </div>

  </form>
</mat-menu>
 
<mat-menu #userLoged="matMenu">
  <button mat-menu-item><mat-icon>settings</mat-icon>Settings</button>
  <div mat-menu-item>
    <button mat-raised-button color="warn" (click)="logout()"><mat-icon>logout</mat-icon> Exit</button>
  </div>
</mat-menu>